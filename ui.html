<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title> Input</title>
  <style>
    body { font-family: system-ui, Arial, sans-serif; padding: 24px; }
    .row { display: flex; gap: 8px; max-width: 520px; }
    input { flex: 1; padding: 10px 12px; font-size: 16px; }
    button { padding: 10px 14px; font-size: 16px; cursor: pointer; }
    #mirrorBox { margin-top: 14px; padding: 12px; border: 1px solid #ccc; min-height: 22px; }
  </style>
</head>
<body>
  <h2>Translater</h2>

  <div class="row">
    <input id="txtInput" type="text" placeholder="Nhập gì đó..." />
    <div class="row">
    <select id="language">
      <option value="fr">French</option>
      <option value="vi">Vietnamese</option>
      <option value="en">English</option>
    </select>
  </div>

    <button id="btnMirror" type="button">translate</button>
  </div>

  <div id="mirrorBox"></div>
  
  <script>
    const btn = document.getElementById("btnMirror");
    const mirrorBox = document.getElementById("mirrorBox");
    const url = 'http://127.0.0.1:8000/translate/';
 
    btn.addEventListener("click", async () => { 
    const input_value = document.getElementById("txtInput").value;
    console.log(input_value);
    const requestData = {  
    text: input_value,
    language: document.getElementById("language").value // Phải là 'fr', 'vi', hoặc 'en'
};

    mirrorBox.textContent = "Translating..."; ;
      
      
  const response = await fetch(url, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(requestData)
      });

      if (!response.ok) {
        throw new Error(`Server error: ${response.status}`);
      }

      const result = await response.json();
    mirrorBox.textContent = result.translation ;
    });
  </script>
</body>
</html>